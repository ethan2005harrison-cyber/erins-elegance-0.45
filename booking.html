<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Book an Appointment — Erin’s Elegance</title>
<meta name="description" content="Book your appointment at Erin’s Elegance. Select services, pick a date and time, and share your details." />
<link rel="canonical" href="https://www.erinselegance.com/booking.html" />
<meta name="theme-color" content="#565D4F" />

<!-- Social cards -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Book an Appointment — Erin’s Elegance" />
<meta property="og:description" content="Select services, choose your preferred date and time, and confirm your booking." />
<meta property="og:url" content="https://www.erinselegance.com/booking.html" />
<meta property="og:image" content="https://www.erinselegance.com/assets/og-image.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Book an Appointment — Erin’s Elegance" />
<meta name="twitter:description" content="Select services, choose your preferred date and time, and confirm your booking." />
<meta name="twitter:image" content="https://www.erinselegance.com/assets/og-image.jpg" />

<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/4150/4150897.png" type="image/png">
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Open+Sans:wght@300;400;600&display=swap');

/* =========================
   Palette & Base
   ========================= */
:root{
  --vogue:#565D4F;        /* Vintage Vogue background */
  --vogue-dark:#4b5246;
  --vogue-light:#626a5b;

  --champagne:#E6D5B8;    /* accents/buttons */
  --cream:#F7F3EA;        /* creamy text on dark / light cards */
  --charcoal:#2C2C2C;     /* text on light cards */
  --line:rgba(230,213,184,.35);
  --error:#E6D5B8;        /* gold-toned error text */
}

/* A11y utility */
.sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,1px,1px);white-space:nowrap;border:0}

*{box-sizing:border-box}
body{
  margin:0; font-family:'Open Sans',sans-serif;
  background: var(--vogue);
  color: var(--cream);
  overflow-x:hidden; position:relative;
}

/* Header with dropdown */
header{
  background: rgba(247,243,234,0.08);
  backdrop-filter: blur(10px);
  position: fixed; width: 100%; top: 0; z-index: 20;
}
.header-container{
  max-width: 1200px; margin: 0 auto;
  display:flex; justify-content:space-between; align-items:center;
  padding: 1.1rem 2rem;
}
.logo{
  font-family:'Playfair Display',serif; font-size:1.6rem; font-weight:600;
  color: var(--cream);
  letter-spacing:.3px;
}
.menu{ position:relative; }
.menu-btn{
  background: rgba(230,213,184,.15);
  color: var(--cream);
  border: 1px solid rgba(230,213,184,.35);
  border-radius: 999px;
  padding: .6rem 1rem;
  font-weight:600; cursor:pointer;
  display:flex; align-items:center; gap:.6rem;
  transition: background .25s, border-color .25s, transform .15s;
}
.menu-btn:hover{ background: rgba(230,213,184,.22); transform: translateY(-1px); }
.menu-btn:focus{ outline:2px solid rgba(230,213,184,.6); outline-offset:2px; }
.menu-btn svg{ width:18px; height:18px; }
.menu-panel{
  position:absolute; right:0; top: calc(100% + .6rem);
  background: rgba(22,24,21,.72);
  backdrop-filter: blur(10px);
  border:1px solid rgba(230,213,184,.28);
  border-radius: 16px; min-width: 220px; padding:.6rem;
  box-shadow: 0 12px 28px rgba(0,0,0,.28);
  opacity:0; transform: translateY(-6px); pointer-events:none;
  transition: opacity .2s ease, transform .2s ease;
}
.menu-panel.open{ opacity:1; transform: translateY(0); pointer-events:auto; }
.menu-panel a{
  display:block; padding:.75rem .9rem; border-radius: 12px;
  text-decoration:none; color: var(--cream); font-weight:600;
  border:1px solid transparent;
}
.menu-panel a:hover{
  background: rgba(230,213,184,.12);
  border-color: rgba(230,213,184,.22);
}

/* Main */
main{
  max-width: 1100px; margin: 12rem auto 4rem;
  padding: 0 2rem; position: relative; z-index: 1;
}
h1{
  font-family:'Playfair Display',serif; font-size:2.6rem; margin:.2rem 0 0.8rem;
  color: var(--cream);
  opacity:0; transform: translateY(-14px); animation: fadeUp .8s forwards .2s;
}
.lead{
  opacity:.92; margin-bottom:1.8rem;
  opacity:0; transform: translateY(-14px); animation: fadeUp .8s forwards .35s;
}

/* Summary pill */
.summary{
  display:flex; align-items:center; gap:.8rem; flex-wrap:wrap;
  background: rgba(247,243,234,0.08);
  border:1px solid var(--line); border-radius: 16px;
  padding:.8rem 1rem; margin: 0 0 1.2rem;
}
.summary .dot{ width:8px; height:8px; border-radius:50%; background: var(--champagne); display:inline-block; }
.summary strong{ font-family:'Playfair Display',serif; }

/* Sections */
.section{
  margin: 1.6rem 0 2.2rem;
  opacity:0; transform: translateY(16px); animation: fadeUp .8s forwards .45s;
}
.section h2{
  font-family:'Playfair Display',serif; font-size:1.6rem; margin:0 0 .8rem;
  color: var(--cream);
}
.grid{
  display:grid; grid-template-columns: repeat(12,1fr); gap:1rem;
}
.card{
  grid-column: span 12;
  background: rgba(247,243,234,0.08);
  border:1px solid var(--line); border-radius:18px;
  padding:1rem; display:flex; gap:1rem; align-items:flex-start;
  transition: transform .15s, box-shadow .3s, background .3s, border-color .3s;
  cursor: pointer; /* whole card is clickable */
}
.card:hover{ transform: translateY(-2px); box-shadow:0 8px 24px rgba(0,0,0,.22); background: rgba(247,243,234,0.10); }
.card.selected{ border-color: var(--champagne); background: rgba(230,213,184,.10); box-shadow: 0 0 0 2px rgba(230,213,184,.22) inset; }
.title{ font-weight:700; color:var(--cream); }
.price{ margin-left:auto; font-family:'Playfair Display',serif; color:var(--champagne); font-weight:600; }
.desc{ margin-top:.2rem; opacity:.95; font-size:.98rem; }
@media (min-width: 720px){ .card{ grid-column: span 6; } }

/* Hide the native checkbox completely (but keep it accessible for screen readers) */
.select{
  display:flex; align-items:flex-start; gap:.6rem; position: relative;
}
.select input{
  position:absolute; opacity:0; pointer-events:none; width:0; height:0; margin:0; padding:0;
}
/* Let label clicks pass through to the card handler */
.select label{
  cursor:pointer; display:block; pointer-events: none;
}

/* Date + Time scrollers */
.picker{
  margin: 1.6rem 0 2.2rem;
  background: rgba(247,243,234,0.08);
  border:1px solid var(--line); border-radius:18px; padding:1rem;
}
.picker h3{
  font-family:'Playfair Display',serif; margin:.2rem 0 1rem; font-size:1.2rem;
}
.scroller{
  display:flex; gap:.6rem; overflow-x:auto; padding-bottom:.2rem; scroll-snap-type:x proximity;
}
.scroller::-webkit-scrollbar{ height:8px }
.scroller::-webkit-scrollbar-thumb{ background: rgba(230,213,184,.25); border-radius:999px }
.pill{
  flex:0 0 auto; scroll-snap-align:center;
  padding:.7rem 1rem; border-radius:999px; border:1px solid var(--line);
  background: rgba(230,213,184,.12); color: var(--cream); font-weight:600; cursor:pointer;
  transition: background .2s, transform .1s, border-color .2s, opacity .2s;
}
.pill:hover{ transform: translateY(-1px); background: rgba(230,213,184,.18); }
.pill[aria-pressed="true"]{ background: var(--champagne); color: var(--charcoal); border-color: transparent; }

/* Form fields */
.form{
  margin-top:1.6rem;
  background: rgba(247,243,234,0.08);
  border:1px solid var(--line); border-radius:18px; padding:1rem;
}
.row{ display:grid; grid-template-columns:1fr; gap:1rem; }
@media (min-width: 720px){ .row{ grid-template-columns:1fr 1fr; } }
label{ display:block; font-weight:600; margin-bottom:.35rem; }
input[type="text"], input[type="email"], input[type="tel"], textarea{
  width:100%; padding:.9rem 1rem; border-radius:12px; border:1px solid var(--line);
  background: rgba(22,24,21,.35); color: var(--cream); font-size:1rem;
  transition: border-color .2s, box-shadow .2s, background .2s;
}
textarea{ min-height:110px; resize:vertical; }
input:focus, textarea:focus{ outline:none; border-color: var(--champagne); box-shadow:0 0 0 3px rgba(230,213,184,.18); }
.error{ margin-top:.4rem; font-size:.9rem; color: var(--error); display:none; }

/* Info note */
.note{
  margin-top:1rem; opacity:.92; font-size:.95rem;
  background: rgba(230,213,184,.12); border:1px solid var(--line);
  border-radius:12px; padding:.8rem 1rem;
}

/* Button */
.actions{ text-align:center; margin-top:1.4rem; }
button.primary{
  background: var(--champagne); color: var(--charcoal);
  border:none; padding: 1.05rem 2.5rem; border-radius: 50px; font-size: 1.05rem;
  cursor:pointer; transition: transform .15s, box-shadow .3s, opacity .2s;
  font-weight:600; box-shadow: 0 6px 18px rgba(0,0,0,.18);
}
button.primary:hover{ transform: translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,.22); opacity:.95; }
button.primary:focus{ outline:2px solid rgba(230,213,184,.7); outline-offset:2px; }

/* Animations */
@keyframes fadeUp{ to{ opacity:1; transform: translateY(0);} }

/* Footer */
footer{
  text-align:center; padding:2rem; font-size:.95rem;
  color: var(--cream); opacity:.9; position:relative; z-index:1;
}

/* ================================
   Silk Mirage background (Vintage Vogue)
   ================================ */
.bg-stage{ position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
.bg-tint{
  position:absolute; inset:0;
  background:
    radial-gradient(1100px 760px at 18% 22%, rgba(98,106,91,0.36) 0%, transparent 60%),
    radial-gradient(1000px 700px at 82% 78%, rgba(75,82,70,0.42) 0%, transparent 55%),
    var(--vogue);
  filter: saturate(103%);
}
.petals, .petals::before, .petals::after{
  position:absolute; inset:-15%; content:"";
  background:
    radial-gradient(28% 22% at 20% 30%, rgba(230,213,184,0.12) 0%, rgba(230,213,184,0) 60%),
    radial-gradient(22% 18% at 70% 65%, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 60%),
    radial-gradient(18% 14% at 55% 35%, rgba(230,213,184,0.09) 0%, rgba(230,213,184,0) 60%),
    radial-gradient(16% 12% at 35% 78%, rgba(230,213,184,0.07) 0%, rgba(230,213,184,0) 60%);
  filter: blur(8px); opacity:.50; animation: petalsFloat 46s ease-in-out infinite;
}
.petals::before{ transform: scale(1.08); opacity:.44; animation: petalsFloatReverse 60s ease-in-out infinite; }
.petals::after{ transform: scale(1.16); opacity:.38; animation: petalsFloat 74s ease-in-out infinite; }
.bg-vignette{
  position:absolute; width:160vmax; height:160vmax; left:50%; top:50%; transform: translate(-50%,-50%);
  border-radius:50%;
  background: radial-gradient(closest-side, rgba(0,0,0,0) 0%, rgba(0,0,0,0.16) 70%, rgba(0,0,0,0.26) 100%);
  opacity:.46; animation: vignetteSpin 120s linear infinite;
}
.bg-grain{
  position:absolute; inset:-12%;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='2' stitchTiles='stitch'/></filter><rect width='120' height='120' filter='url(%23n)' opacity='0.028'/></svg>");
  background-size:160px 160px;
}
@keyframes petalsFloat{ 0%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(-2%,1.2%,0) } 100%{ transform: translate3d(0,0,0) } }
@keyframes petalsFloatReverse{ 0%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(2%,-1.2%,0) } 100%{ transform: translate3d(0,0,0) } }
@keyframes vignetteSpin{ 0%{ transform: translate(-50%,-50%) rotate(0deg); } 50%{ transform: translate(-50%,-50%) rotate(180deg); } 100%{ transform: translate(-50%,-50%) rotate(360deg); } }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .petals, .petals::before, .petals::after, .bg-vignette { animation: none !important; }
}
</style>
</head>
<body>
<a href="#content" class="sr-only">Skip to content</a>

<header role="banner">
  <div class="header-container">
    <div class="logo">erin’s elegance</div>

    <!-- Dropdown navigation -->
    <div class="menu">
      <button class="menu-btn" id="menuButton" aria-haspopup="true" aria-expanded="false" aria-controls="primaryMenu">
        <span>Menu</span>
        <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/></svg>
      </button>
      <nav id="primaryMenu" class="menu-panel" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="services.html">Services</a>
        <a href="booking.html" aria-current="page">Booking</a>
        <a href="about.html">About Our Service</a>
        <a href="terms.html">Terms & Conditions</a>
      </nav>
    </div>
  </div>
</header>

<!-- Background -->
<div class="bg-stage" aria-hidden="true">
  <div class="bg-tint"></div>
  <div class="petals"></div>
  <div class="bg-vignette"></div>
  <div class="bg-grain"></div>
</div>

<main id="content" role="main">
  <h1>Book Your Appointment</h1>
  <p class="lead">Choose your services, then pick a date and time that suits you.</p>

  <!-- Selected summary -->
  <div class="summary" id="summaryBar" aria-live="polite">
    <span class="dot"></span>
    <span><strong id="selectedCount">0</strong> selected</span>
    <span>•</span>
    <span>Total: <strong id="selectedTotal">£0</strong></span>
  </div>

  <!-- Services: Manicures -->
  <section class="section">
    <h2>Manicures</h2>
    <div class="grid">
      <article class="card" data-card-for="svc-m1">
        <div class="select">
          <input type="checkbox" id="svc-m1" data-name="Classic Manicure" data-price="15">
          <label for="svc-m1">
            <div class="title">Classic Manicure</div>
            <div class="desc">Nail shaping, cuticle care, and nourishing finish for naturally neat hands.</div>
          </label>
        </div>
        <div class="price">£15</div>
      </article>

      <article class="card" data-card-for="svc-m2">
        <div class="select">
          <input type="checkbox" id="svc-m2" data-name="Manicure with Polish" data-price="30">
          <label for="svc-m2">
            <div class="title">Manicure with Polish</div>
            <div class="desc">Classic tidy plus a glossy colour of your choice for a polished look.</div>
          </label>
        </div>
        <div class="price">£30</div>
      </article>

      <article class="card" data-card-for="svc-m3">
        <div class="select">
          <input type="checkbox" id="svc-m3" data-name="Luxury Manicure" data-price="40">
          <label for="svc-m3">
            <div class="title">Luxury Manicure</div>
            <div class="desc">The full pampering experience — extra hydration and a soothing massage.</div>
          </label>
        </div>
        <div class="price">£40</div>
      </article>
    </div>
  </section>

  <!-- Services: Pedicures -->
  <section class="section">
    <h2>Pedicures</h2>
    <div class="grid">
      <article class="card" data-card-for="svc-p1">
        <div class="select">
          <input type="checkbox" id="svc-p1" data-name="Classic Pedicure" data-price="30">
          <label for="svc-p1">
            <div class="title">Classic Pedicure</div>
            <div class="desc">Shape, cuticle tidy, and moisturise to refresh tired feet.</div>
          </label>
        </div>
        <div class="price">£30</div>
      </article>

      <article class="card" data-card-for="svc-p2">
        <div class="select">
          <input type="checkbox" id="svc-p2" data-name="Pedicure with Polish" data-price="35">
          <label for="svc-p2">
            <div class="title">Pedicure with Polish</div>
            <div class="desc">Everything in the classic, finished with your chosen colour.</div>
          </label>
        </div>
        <div class="price">£35</div>
      </article>

      <article class="card" data-card-for="svc-p3">
        <div class="select">
          <input type="checkbox" id="svc-p3" data-name="Luxury Pedicure" data-price="40">
          <label for="svc-p3">
            <div class="title">Luxury Pedicure</div>
            <div class="desc">Ultimate spa treatment for your feet — intensive care and relaxation.</div>
          </label>
        </div>
        <div class="price">£40</div>
      </article>
    </div>
  </section>

  <!-- Services: Builder Gel -->
  <section class="section">
    <h2>Builder Gel</h2>
    <div class="grid">
      <article class="card" data-card-for="svc-b1">
        <div class="select">
          <input type="checkbox" id="svc-b1" data-name="Builder Gel Full Set" data-price="40">
          <label for="svc-b1">
            <div class="title">Builder Gel Full Set</div>
            <div class="desc">A resilient overlay for added strength and a smooth, elegant finish.</div>
          </label>
        </div>
        <div class="price">£40</div>
      </article>

      <article class="card" data-card-for="svc-b2">
        <div class="select">
          <input type="checkbox" id="svc-b2" data-name="Builder Gel Infills" data-price="30">
          <label for="svc-b2">
            <div class="title">Builder Gel Infills</div>
            <div class="desc">Refresh and rebalance your builder gel to keep nails flawless.</div>
          </label>
        </div>
        <div class="price">£30</div>
      </article>

      <article class="card" data-card-for="svc-b3">
        <div class="select">
          <input type="checkbox" id="svc-b3" data-name="Builder Gel Removal" data-price="25">
          <label for="svc-b3">
            <div class="title">Builder Gel Removal</div>
            <div class="desc">Gentle soak-off and tidy to keep natural nails healthy.</div>
          </label>
        </div>
        <div class="price">£25</div>
      </article>
    </div>
  </section>

  <!-- Services: Acrylics -->
  <section class="section">
    <h2>Acrylics</h2>
    <div class="grid">
      <article class="card" data-card-for="svc-a1">
        <div class="select">
          <input type="checkbox" id="svc-a1" data-name="Full Set Acrylics" data-price="40">
          <label for="svc-a1">
            <div class="title">Full Set Acrylics</div>
            <div class="desc">Durable enhancements shaped to your preferred length and style.</div>
          </label>
        </div>
        <div class="price">£40</div>
      </article>

      <article class="card" data-card-for="svc-a2">
        <div class="select">
          <input type="checkbox" id="svc-a2" data-name="Acrylic Infills" data-price="30">
          <label for="svc-a2">
            <div class="title">Acrylic Infills</div>
            <div class="desc">Maintenance to fill growth and keep your set looking fresh.</div>
          </label>
        </div>
        <div class="price">£30</div>
      </article>

      <article class="card" data-card-for="svc-a3">
        <div class="select">
          <input type="checkbox" id="svc-a3" data-name="Acrylic Removal" data-price="25">
          <label for="svc-a3">
            <div class="title">Acrylic Removal</div>
            <div class="desc">Professional removal and nail tidy to protect the natural nail.</div>
          </label>
        </div>
        <div class="price">£25</div>
      </article>
    </div>
  </section>

  <!-- Date & Time pickers -->
  <div class="picker" id="datePicker">
    <h3>Select Date</h3>
    <div class="scroller" id="dateScroller" role="tablist" aria-label="Choose a date (next 20 days)"></div>
  </div>

  <div class="picker" id="timePicker">
    <h3>Select Time</h3>
    <div class="scroller" id="timeScroller" role="tablist" aria-label="Choose a time (09:00–18:00)"></div>
  </div>

  <!-- Details -->
  <div class="form">
    <div class="row">
      <div>
        <label for="name">Name</label>
        <input id="name" type="text" placeholder="Your full name">
        <div class="error" id="err-name">Please fill in this space.</div>
      </div>
      <div>
        <label for="email">Email <span aria-hidden="true">*</span></label>
        <input id="email" type="email" placeholder="you@example.com" required>
        <div class="error" id="err-email">Please fill in this space.</div>
      </div>
      <div>
        <label for="phone">Phone <span aria-hidden="true">*</span></label>
        <input id="phone" type="tel" placeholder="07… or +44…" required>
        <div class="error" id="err-phone">Please fill in this space.</div>
      </div>
      <div>
        <label for="notes">Additional Notes</label>
        <textarea id="notes" placeholder="Anything you’d like us to know?"></textarea>
      </div>
    </div>

    <p class="note">We may have to offer you a different time and date than you request.</p>

    <div class="actions">
      <button class="primary" id="continueBtn">Continue to Payment</button>
    </div>
  </div>
</main>

<footer role="contentinfo">
  <p>© 2025 erin’s elegance. all rights reserved.</p>
  <p>16 Werrington Drive, Callington, Cornwall, PL17 7TF</p>
</footer>

<!-- Dropdown script -->
<script>
  (function(){
    const btn = document.getElementById('menuButton');
    const panel = document.getElementById('primaryMenu');

    function closeMenu(){ panel.classList.remove('open'); btn?.setAttribute('aria-expanded','false'); }
    function openMenu(){ panel.classList.add('open'); btn?.setAttribute('aria-expanded','true'); }

    if(btn){
      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        expanded ? closeMenu() : openMenu();
      });
    }

    document.addEventListener('click', (e) => {
      if(panel && !panel.contains(e.target) && e.target !== btn && !btn?.contains(e.target)) closeMenu();
    });
    document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeMenu(); });
  })();
</script>

<!-- Booking logic (card click fix in place) -->
<script>
(function(){
  // Collect checkboxes and make entire card toggle
  const cards = document.querySelectorAll('.card[data-card-for]');
  const checkboxes = [];

  cards.forEach(card => {
    const id = card.getAttribute('data-card-for');
    const input = document.getElementById(id);
    if(!input) return;

    checkboxes.push(input);

    // Sync visual state with checkbox
    const sync = () => {
      if (input.checked) card.classList.add('selected');
      else card.classList.remove('selected');
    };

    // Click anywhere on the card toggles the checkbox
    card.addEventListener('click', (e) => {
      // If somehow the actual input gets clicked, let it work normally
      if (e.target === input) return;
      // Toggle and emit change to update summary
      input.checked = !input.checked;
      input.dispatchEvent(new Event('change', { bubbles: true }));
    });

    input.addEventListener('change', sync);
    sync();
  });

  // Summary update
  const selectedCount = document.getElementById('selectedCount');
  const selectedTotal = document.getElementById('selectedTotal');

  function refreshSummary(){
    const selected = checkboxes.filter(c => c.checked);
    const total = selected.reduce((sum,c)=> sum + Number(c.dataset.price||0), 0);
    if (selectedCount) selectedCount.textContent = selected.length;
    if (selectedTotal) selectedTotal.textContent = `£${total}`;
  }
  checkboxes.forEach(cb => cb.addEventListener('change', refreshSummary));
  refreshSummary();

  // Date scroller (next 20 days, earliest = tomorrow to enforce 24h)
  const dateScroller = document.getElementById('dateScroller');
  let chosenDate = null;

  const today = new Date();
  today.setHours(0,0,0,0);
  const start = new Date(today);
  start.setDate(today.getDate() + 1); // earliest selectable = tomorrow

  for(let i=0;i<20;i++){
    const d = new Date(start);
    d.setDate(start.getDate() + i);

    const label = d.toLocaleDateString(undefined, { weekday:'short', day:'numeric', month:'short' });
    const pill = document.createElement('button');
    pill.className = 'pill';
    pill.type = 'button';
    pill.setAttribute('role','tab');
    pill.setAttribute('aria-pressed','false');
    pill.textContent = label;
    pill.dataset.value = d.toISOString().split('T')[0];

    pill.addEventListener('click',()=>{
      document.querySelectorAll('#dateScroller .pill[aria-pressed="true"]').forEach(el => el.setAttribute('aria-pressed','false'));
      pill.setAttribute('aria-pressed','true');
      chosenDate = pill.dataset.value;
      validateDateTime();
    });

    dateScroller.appendChild(pill);
  }

  // Time scroller (09:00–18:00 hourly)
  const timeScroller = document.getElementById('timeScroller');
  let chosenTime = null;
  for(let h=9; h<=18; h++){
    const timeLabel = `${String(h).padStart(2,'0')}:00`;
    const pill = document.createElement('button');
    pill.className = 'pill';
    pill.type = 'button';
    pill.setAttribute('role','tab');
    pill.setAttribute('aria-pressed','false');
    pill.textContent = timeLabel;
    pill.dataset.value = timeLabel;

    pill.addEventListener('click',()=>{
      document.querySelectorAll('#timeScroller .pill[aria-pressed="true"]').forEach(el => el.setAttribute('aria-pressed','false'));
      pill.setAttribute('aria-pressed','true');
      chosenTime = pill.dataset.value;
      validateDateTime();
    });

    timeScroller.appendChild(pill);
  }

  // Fields + inline errors
  const nameEl = document.getElementById('name');
  const emailEl = document.getElementById('email');
  const phoneEl = document.getElementById('phone');
  const notesEl = document.getElementById('notes');

  const errName = document.getElementById('err-name');
  const errEmail = document.getElementById('err-email');
  const errPhone = document.getElementById('err-phone');

  function show(el){ el.style.display = 'block'; }
  function hide(el){ el.style.display = 'none'; }

  function validateRequired(){
    let ok = true;
    if(nameEl.value.trim().length === 0){ show(errName); ok=false; } else hide(errName);
    if(emailEl.value.trim().length === 0){ show(errEmail); ok=false; } else hide(errEmail);
    if(phoneEl.value.trim().length === 0){ show(errPhone); ok=false; } else hide(errPhone);
    return ok;
  }

  // Enforce >=24h between now and selected date+time (browser local time)
  function validateDateTime(){
    if(!chosenDate || !chosenTime) return true;
    const dt = new Date(chosenDate + 'T' + chosenTime + ':00');

    const now = new Date();
    const min = new Date(now.getTime() + 24*60*60*1000); // +24h

    const isValid = dt.getTime() >= min.getTime();
    document.querySelectorAll('#timeScroller .pill[aria-pressed="true"]').forEach(el => {
      el.style.opacity = isValid ? '1' : '.55';
      el.style.boxShadow = isValid ? '' : '0 0 0 2px rgba(230,213,184,.35) inset';
    });
    return isValid;
  }

  // Continue -> payment.html (no Formspree here)
  document.getElementById('continueBtn').addEventListener('click', ()=>{
    const reqOK = validateRequired();
    const dateOK = validateDateTime();

    // Must select at least one service
    const selected = checkboxes.filter(c => c.checked);
    if(selected.length === 0){
      const bar = document.getElementById('summaryBar');
      bar.style.transform = 'scale(1.015)';
      bar.style.boxShadow = '0 0 0 3px rgba(230,213,184,.18)';
      setTimeout(()=>{ bar.style.transform=''; bar.style.boxShadow=''; }, 320);
      return;
    }
    if(!reqOK || !chosenDate || !chosenTime || !dateOK){
      if(!chosenDate){
        document.getElementById('datePicker').style.boxShadow = '0 0 0 3px rgba(230,213,184,.18)';
        setTimeout(()=>{ document.getElementById('datePicker').style.boxShadow=''; }, 320);
      }
      if(!chosenTime || !dateOK){
        document.getElementById('timePicker').style.boxShadow = '0 0 0 3px rgba(230,213,184,.18)';
        setTimeout(()=>{ document.getElementById('timePicker').style.boxShadow=''; }, 320);
      }
      return;
    }

    const servicesParams = [];
    let total = 0;
    selected.forEach(c => {
      const name = c.dataset.name;
      const price = Number(c.dataset.price||0);
      servicesParams.push(['service', `${name} - ${price}`]);
      total += price;
    });

    const params = new URLSearchParams();
    params.set('name', nameEl.value.trim());
    params.set('email', emailEl.value.trim());
    params.set('phone', phoneEl.value.trim());
    params.set('desiredDate', chosenDate);
    params.set('desiredTime', chosenTime);
    params.set('notes', notesEl.value.trim());
    params.set('total', total);
    servicesParams.forEach(([k,v]) => params.append(k, v));

    window.location.href = `payment.html?${params.toString()}`;
  });

  // Hide errors on input
  [nameEl, emailEl, phoneEl].forEach(el=>{
    el.addEventListener('input', ()=>{
      if(el.value.trim().length > 0){
        const target = el.id === 'name' ? errName : el.id === 'email' ? errEmail : errPhone;
        target && (target.style.display = 'none');
      }
    });
  });
})();
</script>
</body>
</html>
