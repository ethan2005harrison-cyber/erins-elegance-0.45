<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Booking — erin’s elegance</title>
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/4150/4150897.png" type="image/png">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Open+Sans:wght@300;400;600&display=swap');

:root{
  --vogue:#565D4F;        /* Vintage Vogue */
  --champagne:#E6D5B8;
  --cream:#F7F3EA;
  --charcoal:#2C2C2C;
  --line:rgba(230,213,184,.35);
}

/* Base */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; font-family:'Open Sans',sans-serif;
  background: var(--vogue); color: var(--cream);
  overflow-x:hidden; position:relative;
}

/* Header + dropdown */
header{
  position:fixed; top:0; left:0; right:0; z-index:20;
  background: rgba(247,243,234,0.08); backdrop-filter: blur(10px);
}
.header-container{
  max-width:1200px; margin:0 auto;
  display:flex; align-items:center; justify-content:space-between;
  padding:1.1rem 2rem;
}
.logo{
  font-family:'Playfair Display',serif; font-weight:600; font-size:1.6rem;
  color:var(--cream); letter-spacing:.3px;
}
.menu{ position:relative; }
.menu-btn{
  background: rgba(230,213,184,.15);
  border: 1px solid rgba(230,213,184,.35);
  color: var(--cream); border-radius: 999px;
  padding: .6rem 1rem; font-weight:600; cursor:pointer;
  display:flex; align-items:center; gap:.6rem;
  transition: background .25s, border-color .25s, transform .15s;
}
.menu-btn:hover{ background: rgba(230,213,184,.22); transform: translateY(-1px); }
.menu-btn:focus{ outline:2px solid rgba(230,213,184,.6); outline-offset:2px; }
.menu-btn svg{ width:18px; height:18px; }
.menu-panel{
  position:absolute; right:0; top: calc(100% + .6rem);
  min-width: 220px; padding:.6rem;
  background: rgba(22,24,21,.72); backdrop-filter: blur(10px);
  border:1px solid rgba(230,213,184,.28); border-radius:16px;
  box-shadow: 0 12px 28px rgba(0,0,0,.28);
  opacity:0; transform: translateY(-6px); pointer-events:none;
  transition: opacity .2s ease, transform .2s ease;
}
.menu-panel.open{ opacity:1; transform: translateY(0); pointer-events:auto; }
.menu-panel a{
  display:block; padding:.75rem .9rem; border-radius:12px;
  color:var(--cream); text-decoration:none; font-weight:600;
  border:1px solid transparent;
}
.menu-panel a:hover{
  background: rgba(230,213,184,.12);
  border-color: rgba(230,213,184,.22);
}

/* Background */
.bg-stage{ position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
.bg-tint{
  position:absolute; inset:0; filter:saturate(103%);
  background:
    radial-gradient(1100px 760px at 18% 22%, rgba(98,106,91,0.36) 0%, transparent 60%),
    radial-gradient(1000px 700px at 82% 78%, rgba(75,82,70,0.42) 0%, transparent 55%),
    var(--vogue);
}
.petals, .petals::before, .petals::after{
  position:absolute; inset:-15%; content:"";
  background:
    radial-gradient(28% 22% at 20% 30%, rgba(230,213,184,0.12) 0%, rgba(230,213,184,0) 60%),
    radial-gradient(22% 18% at 70% 65%, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 60%),
    radial-gradient(18% 14% at 55% 35%, rgba(230,213,184,0.09) 0%, rgba(230,213,184,0) 60%),
    radial-gradient(16% 12% at 35% 78%, rgba(230,213,184,0.07) 0%, rgba(230,213,184,0) 60%);
  filter: blur(8px); opacity:.50; animation: petalsFloat 46s ease-in-out infinite;
}
.petals::before{ transform: scale(1.08); opacity:.44; animation: petalsFloatReverse 60s ease-in-out infinite; }
.petals::after{ transform: scale(1.16); opacity:.38; animation: petalsFloat 74s ease-in-out infinite; }
@keyframes petalsFloat{ 0%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(-2%,1.2%,0) } 100%{ transform: translate3d(0,0,0) } }
@keyframes petalsFloatReverse{ 0%{ transform: translate3d(0,0,0) } 50%{ transform: translate3d(2%,-1.2%,0) } 100%{ transform: translate3d(0,0,0) } }
@keyframes fadeUp { to { opacity:1; transform: translateY(0); } }

/* Main */
main{
  max-width: 1000px; margin: 12rem auto 4rem; padding: 0 2rem; position:relative; z-index:2;
}
h1{
  font-family:'Playfair Display',serif; font-size:2.6rem; margin:.2rem 0 .6rem;
  opacity:0; transform: translateY(-14px); animation: fadeUp .8s forwards .2s;
}
.lead{
  opacity:0; transform: translateY(-14px); animation: fadeUp .8s forwards .35s;
  margin-bottom: 1.4rem; opacity:.95;
}

/* Basket/overview */
.summary{
  background: rgba(247,243,234,.08);
  border:1px solid var(--line); border-radius:16px;
  padding:1rem 1.2rem; margin-bottom:1.2rem;
}
.summary h3{
  font-family:'Playfair Display',serif; margin:.2rem 0 .6rem;
}
.summary .tags{ display:flex; gap:.5rem; flex-wrap:wrap; }
.tag{
  background: rgba(247,243,234,.08);
  border:1px solid var(--line);
  color: var(--cream);
  border-radius:999px; padding:.35rem .7rem; font-weight:600; font-size:.95rem;
}
.total{ font-family:'Playfair Display',serif; text-align:right; margin-top:.6rem; }

/* Section headings */
.section-title{
  margin: 1.6rem 0 .6rem;
  font-family:'Playfair Display',serif;
  border-left: 4px solid var(--champagne);
  padding-left:.6rem;
}

/* Services grid */
.services{
  display:grid; gap:.8rem;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}
.service-card{
  display:flex; justify-content:space-between; align-items:center; gap:1rem;
  background: rgba(247,243,234,.08);
  border:1px solid var(--line); border-radius:16px; padding:1rem 1.1rem;
  cursor:pointer; transition: transform .15s, box-shadow .3s, border-color .2s, background .2s;
}
.service-card:hover{ transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,.22); }
.service-card.selected{ border-color: var(--champagne); background: rgba(247,243,234,.12); }
.service-info h4{ margin:.1rem 0 .25rem; font-family:'Playfair Display',serif; }
.service-info p{ margin:0; opacity:.9; font-size:.95rem; }
.price{ font-weight:700 }

/* Date + Time pickers */
.form-grid{ display:grid; gap:1rem; grid-template-columns:1fr; margin-top:1rem; }
.field{
  background: rgba(247,243,234,.08); border:1px solid var(--line);
  border-radius:16px; padding:1rem 1.1rem;
}
.field label{ font-weight:700; display:block; margin-bottom:.35rem; }
.input, textarea{
  width:100%; padding:.8rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.2);
  background: rgba(255,255,255,.04); color: var(--cream); font-size:1rem;
}
.input:focus, textarea:focus{ outline:2px solid var(--champagne); border-color: var(--champagne); }

/* Time carousel */
.time-row{
  display:flex; gap:.5rem; overflow-x:auto; padding:.25rem; scroll-snap-type:x mandatory;
}
.time-btn{
  scroll-snap-align: start;
  white-space:nowrap;
  padding:.65rem 1rem; border-radius:999px;
  background: rgba(247,243,234,.08);
  border:1px solid var(--line); color:var(--cream);
  font-weight:600; cursor:pointer; transition: transform .1s, box-shadow .2s;
}
.time-btn:hover{ transform: translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.2); }
.time-btn.selected{ outline:2px solid var(--champagne); }
.time-btn.disabled{ opacity:.45; pointer-events:none; }

/* Errors */
.error{ color: var(--champagne); margin-top:.4rem; font-weight:700; display:none; }

/* Note above submit */
.note{ margin-top:.5rem; opacity:.95 }

/* Submit button */
.actions{ margin-top:1.2rem; display:flex; justify-content:center }
button.primary{
  background: var(--champagne); color: var(--charcoal);
  border:none; padding: 1rem 2.2rem; border-radius:50px; font-weight:700;
  cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.18);
  transition: transform .15s, box-shadow .3s;
}
button.primary:hover{ transform: translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,.22); }

/* Footer */
footer{ text-align:center; padding:2rem; color:var(--cream); opacity:.9 }

/* Responsive */
@media (min-width: 720px){
  .form-grid{ grid-template-columns:1fr 1fr; }
}
</style>
</head>
<body>
<header>
  <div class="header-container">
    <div class="logo">erin’s elegance</div>
    <div class="menu">
      <button class="menu-btn" id="menuButton" aria-haspopup="true" aria-expanded="false" aria-controls="primaryMenu">
        <span>Menu</span>
        <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/></svg>
      </button>
      <nav id="primaryMenu" class="menu-panel" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="services.html">Services</a>
        <a href="booking.html" aria-current="page">Booking</a>
        <a href="about.html">About Our Service</a>
        <a href="terms.html">Terms & Conditions</a>
      </nav>
    </div>
  </div>
</header>

<!-- Background -->
<div class="bg-stage" aria-hidden="true">
  <div class="bg-tint"></div>
  <div class="petals"></div>
</div>

<main>
  <h1>Book Your Appointment</h1>
  <p class="lead">Choose your services, pick a date and time, then enter your details. We’ll confirm by email or phone.</p>

  <!-- Basket/Overview -->
  <div class="summary" id="summaryBox">
    <h3>Your Selection</h3>
    <div class="tags" id="selectedTags"></div>
    <div class="total" id="totalDisplay">Total: £0.00</div>
  </div>

  <!-- Services: Manicures -->
  <h3 class="section-title">Manicures</h3>
  <section class="services" id="manicures">
    <div class="service-card" data-name="Classic Manicure" data-price="15">
      <div class="service-info">
        <h4>Classic Manicure</h4>
        <p>Nail tidy, shaping, and cuticle care — a clean, polished finish.</p>
      </div>
      <div class="price">£15</div>
    </div>
    <div class="service-card" data-name="Gel / Shellac" data-price="30">
      <div class="service-info">
        <h4>Gel / Shellac</h4>
        <p>High-gloss colour with durable wear.</p>
      </div>
      <div class="price">£30</div>
    </div>
    <div class="service-card" data-name="Luxury Manicure" data-price="40">
      <div class="service-info">
        <h4>Luxury Manicure</h4>
        <p>The full pampering experience.</p>
      </div>
      <div class="price">£40</div>
    </div>
  </section>

  <!-- Services: Pedicures -->
  <h3 class="section-title">Pedicures</h3>
  <section class="services" id="pedicures">
    <div class="service-card" data-name="Classic Pedicure" data-price="30">
      <div class="service-info">
        <h4>Classic Pedicure</h4>
        <p>Shape, buff, and refresh for comfortable, neat feet.</p>
      </div>
      <div class="price">£30</div>
    </div>
    <div class="service-card" data-name="Luxury Pedicure" data-price="40">
      <div class="service-info">
        <h4>Luxury Pedicure</h4>
        <p>Ultimate spa treatment for your feet.</p>
      </div>
      <div class="price">£40</div>
    </div>
  </section>

  <!-- Services: Enhancements -->
  <h3 class="section-title">Enhancements</h3>
  <section class="services" id="enhancements">
    <div class="service-card" data-name="Full Set Acrylics" data-price="40">
      <div class="service-info">
        <h4>Full Set Acrylics</h4>
        <p>Fresh, durable length and shape tailored to you.</p>
      </div>
      <div class="price">£40</div>
    </div>
    <div class="service-card" data-name="Acrylic Infills" data-price="30">
      <div class="service-info">
        <h4>Acrylic Infills</h4>
        <p>Refresh and rebalance for lasting wear.</p>
      </div>
      <div class="price">£30</div>
    </div>
    <div class="service-card" data-name="Acrylic Removal" data-price="25">
      <div class="service-info">
        <h4>Acrylic Removal</h4>
        <p>Gentle removal with nail care.</p>
      </div>
      <div class="price">£25</div>
    </div>
    <div class="service-card" data-name="Builder Gel Full Set" data-price="40">
      <div class="service-info">
        <h4>Builder Gel Full Set</h4>
        <p>Strength and structure with a natural look.</p>
      </div>
      <div class="price">£40</div>
    </div>
    <div class="service-card" data-name="Builder Gel Infills" data-price="30">
      <div class="service-info">
        <h4>Builder Gel Infills</h4>
        <p>Maintain strength and shape between sets.</p>
      </div>
      <div class="price">£30</div>
    </div>
    <div class="service-card" data-name="Builder Gel Removal" data-price="25">
      <div class="service-info">
        <h4>Builder Gel Removal</h4>
        <p>Gentle removal with nourishing finish.</p>
      </div>
      <div class="price">£25</div>
    </div>
    <div class="service-card" data-name="Nail Art (from)" data-price="10">
      <div class="service-info">
        <h4>Nail Art (from)</h4>
        <p>From subtle accents to statement designs.</p>
      </div>
      <div class="price">£10</div>
    </div>
  </section>

  <!-- Details -->
  <form id="bookingForm" novalidate>
    <div class="form-grid">
      <div class="field">
        <label for="desiredDate">Desired Date</label>
        <input class="input" type="date" id="desiredDate" name="desiredDate" required />
        <div class="error" id="dateError">Please select a date at least 24 hours from now.</div>
      </div>

      <div class="field">
        <label>Desired Time</label>
        <input type="hidden" id="desiredTime" name="desiredTime" />
        <div id="timeButtons" class="time-row" aria-label="Time options (hourly)"></div>
        <div class="error" id="timeError">Please choose a time.</div>
      </div>

      <div class="field">
        <label for="name">Your Name</label>
        <input class="input" type="text" id="name" name="name" placeholder="Full name" />
      </div>

      <div class="field">
        <label for="email">Email <span style="opacity:.8">(required)</span></label>
        <input class="input" type="email" id="email" name="email" required placeholder="you@example.com" />
        <div class="error" id="emailError">Please fill in this space.</div>
      </div>

      <div class="field">
        <label for="phone">Phone <span style="opacity:.8">(required)</span></label>
        <input class="input" type="tel" id="phone" name="phone" required placeholder="07…" />
        <div class="error" id="phoneError">Please fill in this space.</div>
      </div>

      <div class="field" style="grid-column:1 / -1">
        <label for="notes">Additional Notes</label>
        <textarea id="notes" name="notes" rows="4" placeholder="Anything we should know?"></textarea>
      </div>
    </div>

    <p class="note"><em>We may have to offer you a different time and date than you request.</em></p>

    <div class="actions">
      <button type="submit" class="primary">Continue to Payment</button>
    </div>
  </form>
</main>

<footer>
  <p>© 2025 erin’s elegance. all rights reserved.</p>
</footer>

<script>
/* ====== Config: your Google Apps Script URL ====== */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx0AI5Ow3gzvCNq9qju1oIx35LdFKN-5NoIevOIRMVHcQVDIgf62huPMTw199ZVPqY2/exec";

/* ====== Dropdown menu ====== */
(function(){
  const btn = document.getElementById('menuButton');
  const panel = document.getElementById('primaryMenu');
  if(!btn || !panel) return;
  function closeMenu(){ panel.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
  function openMenu(){ panel.classList.add('open'); btn.setAttribute('aria-expanded','true'); }
  btn.addEventListener('click', (e)=>{
    e.stopPropagation();
    const expanded = btn.getAttribute('aria-expanded') === 'true';
    expanded ? closeMenu() : openMenu();
  });
  document.addEventListener('click', (e)=>{ if(!panel.contains(e.target) && !btn.contains(e.target)) closeMenu(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMenu(); });
})();

/* ====== Services selection & basket ====== */
let selected = []; // {name, price}
const selectedTags = document.getElementById('selectedTags');
const totalDisplay = document.getElementById('totalDisplay');

function renderBasket(){
  selectedTags.innerHTML = "";
  let total = 0;
  selected.forEach(s=>{
    total += s.price;
    const el = document.createElement('span');
    el.className = 'tag';
    el.textContent = `${s.name} — £${s.price.toFixed(2)}`;
    selectedTags.appendChild(el);
  });
  totalDisplay.textContent = `Total: £${total.toFixed(2)}`;
}

// Full-card clickable toggles
document.querySelectorAll('.service-card').forEach(card=>{
  card.addEventListener('click', ()=>{
    const name = card.dataset.name;
    const price = parseFloat(card.dataset.price||"0");
    const idx = selected.findIndex(s=>s.name===name && s.price===price);
    if(idx>=0){
      selected.splice(idx,1);
      card.classList.remove('selected');
    }else{
      selected.push({name, price});
      card.classList.add('selected');
    }
    renderBasket();
  });
});

/* ====== Time buttons (hourly 09–18) with gray-out ====== */
const timeContainer = document.getElementById('timeButtons');
const hiddenTime = document.getElementById('desiredTime');

function buildTimeButtons(disabledTimes = []){
  timeContainer.innerHTML = "";
  for(let h=9; h<=18; h++){
    const hh = String(h).padStart(2,'0');
    const label = `${hh}:00`;
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.textContent = label;
    btn.className = 'time-btn';
    if(disabledTimes.includes(label)){
      btn.classList.add('disabled');
      btn.setAttribute('aria-disabled','true');
    }
    btn.addEventListener('click', ()=>{
      if(btn.classList.contains('disabled')) return;
      document.querySelectorAll('.time-btn.selected').forEach(b=>b.classList.remove('selected'));
      btn.classList.add('selected');
      hiddenTime.value = label;
      document.getElementById('timeError').style.display = 'none';
    });
    timeContainer.appendChild(btn);
  }
}

/* ====== Fetch booked times for date ====== */
async function refreshTimesForDate(dateStr){
  try{
    const res = await fetch(`${SCRIPT_URL}?date=${encodeURIComponent(dateStr)}`);
    const data = await res.json();
    const booked = Array.isArray(data.booked) ? data.booked : [];
    buildTimeButtons(booked);
  }catch(err){
    console.warn('Could not load booked times', err);
    buildTimeButtons([]); // show all times enabled if error
  }
}

/* ====== 24h rule on date ====== */
const dateInput = document.getElementById('desiredDate');
function setDateMin24h(){
  const now = new Date();
  const min = new Date(now.getTime() + 24*60*60*1000); // +24h
  const yyyy = min.getFullYear();
  const mm = String(min.getMonth()+1).padStart(2,'0');
  const dd = String(min.getDate()).padStart(2,'0');
  dateInput.min = `${yyyy}-${mm}-${dd}`;
}
setDateMin24h();

/* Initialize time row on load and on date changes */
document.addEventListener('DOMContentLoaded', ()=>{
  // Set date default to earliest allowed for convenience
  if(!dateInput.value){ dateInput.value = dateInput.min; }
  refreshTimesForDate(dateInput.value);
});

dateInput.addEventListener('change', ()=>{
  hiddenTime.value = '';
  document.getElementById('timeError').style.display = 'none';
  refreshTimesForDate(dateInput.value);
});

/* ====== Form validation + submit to payment.html ====== */
const form = document.getElementById('bookingForm');

function showError(id, show){
  const el = document.getElementById(id);
  el.style.display = show ? 'block' : 'none';
}

form.addEventListener('submit', (e)=>{
  e.preventDefault();

  // Validate
  const email = document.getElementById('email').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const dateVal = dateInput.value;
  const timeVal = hiddenTime.value;

  let ok = true;

  // 24h rule check
  const chosen = new Date(`${dateVal}T${(timeVal||'09:00')}:00`);
  const now = new Date();
  if((chosen - now) < 24*60*60*1000){
    showError('dateError', true); ok = false;
  }else{ showError('dateError', false); }

  if(!timeVal){ showError('timeError', true); ok = false; } else { showError('timeError', false); }
  if(!email){ showError('emailError', true); ok = false; } else { showError('emailError', false); }
  if(!phone){ showError('phoneError', true); ok = false; } else { showError('phoneError', false); }

  if(selected.length === 0){
    alert('Please select at least one service.');
    ok = false;
  }

  if(!ok) return;

  // Build querystring for payment.html
  const servicesParam = selected.map(s => `${s.name} - ${s.price.toFixed(2)}`);
  const total = selected.reduce((sum,s)=>sum+s.price,0);

  const params = new URLSearchParams({
    name: document.getElementById('name').value.trim(),
    email,
    phone,
    desiredDate: dateVal,
    desiredTime: timeVal,
    notes: document.getElementById('notes').value.trim(),
    total: total.toFixed(2)
  });

  servicesParam.forEach(s => params.append('service', s));

  window.location.href = `payment.html?${params.toString()}`;
});
</script>
</body>
</html>


